# Установка считывателя в ТЧ-10

Для реализации процесса прослеживаемости комплектности вьезжаемого поезда с составными активами.

## Алгоритм работы

1. Контроллер считывает данные с сокета прописанного в вэб интерфейсе RFID считывателя, во временный файл.
2. По расписанию (один раз в минуту), контроллер передает по API на сервер АС ПУМА, данные из временных файлов стирая их.
3. По расписанию (один раз в минуту), передается состояние контроллера.

## Оборудование

1. RFID сканнер SAUK-iot-PRO.
2. Контроллер Raspberry Pi 3B/4B.

## На чем написан

PHP 7.3<br>
BASH-скрипты

## Установка на контроллер

1. Скопировать содержимое папки `html` в папку `/var/www/html`<br>
<br>
2. Настроить сеть, изменив содержимое файла `/etc/network/interfaces`

```sh
auto lo
iface lo inet loopback
auto eth0
iface eth0 inet static
address 192.168.1.39
netmask 255.255.255.0
auto eth1
iface eth1 inet static
address 192.168.88.2
netmask 255.255.255.0
gateway 192.168.88.1
```

3. Добавить задания в крон суперпользователя, командой: `sudo su && crontab -e`

```sh
*/1 * * * * cd /var/www/html/ && /usr/bin/php telemDebian.php > /dev/null 2>&1
*/1 * * * * cd /var/www/html/ && sudo bash starter.sh > /dev/null 2>&1
*/1 * * * * cd /var/www/html/ && sudo /usr/bin/php toServer.php > log.txt
```

## Контакты

Марин Владимир Николаевич<br>
+7 (911) 903-94-23<br>
v.marin@rwdt.ru